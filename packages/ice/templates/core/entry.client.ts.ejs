import { runClientApp, getAppConfig } from '<%- iceRuntimePath %>';
import * as app from '@/app';
import runtimeModules from './runtimeModules';
import routes from './routes';
import Document from '@/document';

const getRouterBasename = () => {
  const appConfig = getAppConfig(app);
  return '<%- basename %>' || appConfig?.router?.basename || '';
}

runClientApp({
  app,
  runtimeModules,
  <% if (needRoutes) { %>
  routes,
  <% } %>
  <% if (needDocument) { %>
  Document,
  <% } %>
  basename: getRouterBasename(),
  hydrate: <%- hydrate %>,
  memoryRouter: <%- memoryRouter || false %>,
});
